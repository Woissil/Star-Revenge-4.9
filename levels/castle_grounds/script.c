#include <ultra64.h>
#include "sm64.h"
#include "behavior_data.h"
#include "model_ids.h"
#include "seq_ids.h"
#include "dialog_ids.h"
#include "segment_symbols.h"
#include "level_commands.h"
#include "game/level_update.h"
#include "levels/scripts.h"
#include "actors/common1.h"
#include "make_const_nonconst.h"

#include "areas/1/custom.model.inc.h"
#include "areas/2/custom.model.inc.h"
#include "areas/3/custom.model.inc.h"
#include "levels/castle_grounds/header.h"
extern u8 _castle_grounds_segment_ESegmentRomStart[]; 
extern u8 _castle_grounds_segment_ESegmentRomEnd[];
#include "levels/rr/header.h"
const LevelScript level_castle_grounds_entry[] = {
INIT_LEVEL(),
LOAD_MIO0(0x07, _rr_segment_7SegmentRomStart, _rr_segment_7SegmentRomEnd),
LOAD_RAW(0x1A, _rrSegmentRomStart, _rrSegmentRomEnd),
LOAD_RAW(0x0E, _castle_grounds_segment_ESegmentRomStart, _castle_grounds_segment_ESegmentRomEnd),
LOAD_MIO0(0xA,_SkyboxCustom39818080_skybox_mio0SegmentRomStart,_SkyboxCustom39818080_skybox_mio0SegmentRomEnd),
LOAD_MIO0(8,_common0_mio0SegmentRomStart,_common0_mio0SegmentRomEnd),
LOAD_RAW(15,_common0_geoSegmentRomStart,_common0_geoSegmentRomEnd),
LOAD_MIO0(6,_group15_mio0SegmentRomStart,_group15_mio0SegmentRomEnd),
LOAD_RAW(13,_group15_geoSegmentRomStart,_group15_geoSegmentRomEnd),
ALLOC_LEVEL_POOL(),
MARIO(/*model*/ MODEL_MARIO, /*behParam*/ 0x00000001, /*beh*/ bhvMario),
LOAD_MODEL_FROM_GEO(22, warp_pipe_geo),
LOAD_MODEL_FROM_GEO(23, bubbly_tree_geo),
LOAD_MODEL_FROM_GEO(24, spiky_tree_geo),
LOAD_MODEL_FROM_GEO(25, snow_tree_geo),
LOAD_MODEL_FROM_GEO(27, palm_tree_geo),
LOAD_MODEL_FROM_GEO(31, metal_door_geo),
LOAD_MODEL_FROM_GEO(32, hazy_maze_door_geo),
LOAD_MODEL_FROM_GEO(34, castle_door_0_star_geo),
LOAD_MODEL_FROM_GEO(35, castle_door_1_star_geo),
LOAD_MODEL_FROM_GEO(36, castle_door_3_stars_geo),
LOAD_MODEL_FROM_GEO(37, key_door_geo),
LOAD_MODEL_FROM_GEO(38, castle_door_geo),
// LOAD_MODEL_FROM_GEO(131,0x0404fe00),
// LOAD_MODEL_FROM_DL(132,0x08025f08,4),
// LOAD_MODEL_FROM_GEO(137,0x04050000),
// LOAD_MODEL_FROM_DL(158,0x0302c8a0,4),
// LOAD_MODEL_FROM_DL(159,0x0302bcd0,4),
// LOAD_MODEL_FROM_DL(161,0x0301cb00,4),
// LOAD_MODEL_FROM_DL(164,0x04032a18,4),
// LOAD_MODEL_FROM_DL(201,0x080048e0,4),
// LOAD_MODEL_FROM_DL(218,0x08024bb8,4),
JUMP_LINK(script_func_global_1),
JUMP_LINK(script_func_global_16),
JUMP_LINK(local_area_castle_grounds_1_),
JUMP_LINK(local_area_castle_grounds_2_),
JUMP_LINK(local_area_castle_grounds_3_),
FREE_LEVEL_POOL(),
MARIO_POS(1,0,1702,1417,1833),
CALL(/*arg*/ 0, /*func*/ lvl_init_or_update),
CALL_LOOP(/*arg*/ 1, /*func*/ lvl_init_or_update),
CLEAR_LEVEL(),
SLEEP_BEFORE_EXIT(/*frames*/ 1),
EXIT(),
};
const LevelScript local_area_castle_grounds_1_[] = {
AREA(1,Geo_castle_grounds_1_0x261f280),
TERRAIN(col_castle_grounds_1_0xe0beeb0),
SET_BACKGROUND_MUSIC(0,65),
TERRAIN_TYPE(0),
JUMP_LINK(local_objects_castle_grounds_1_),
JUMP_LINK(local_warps_castle_grounds_1_),
END_AREA(),
RETURN()
};
const LevelScript local_objects_castle_grounds_1_[] = {
OBJECT_WITH_ACTS(0,1702,1417,1833,0,0,0,0xa0000, bhvSpinAirborneWarp,31),
OBJECT_WITH_ACTS(124,1251,900,2581,0,90,0,0x3e0000, bhvMessagePanel,31),
OBJECT_WITH_ACTS(124,-1808,600,8076,0,180,0,0x240000, bhvMessagePanel,31),
OBJECT_WITH_ACTS(195,2081,900,2030,0,0,0,0x3f000000, bhvToadMessage,31),
OBJECT_WITH_ACTS(195,-2622,600,7583,0,0,0,0x420000, bhvBobombBuddy,31),
OBJECT_WITH_ACTS(0,-2027,723,8411,0,0,0,0xf010000, bhvWarp,31),
OBJECT_WITH_ACTS(146,8,918,-10406,0,0,0,0x32190000, bhvSpring_MOP,31),
OBJECT_WITH_ACTS(34,-76,0,-3757,0,0,0,0x0, bhvDoor,31),
OBJECT_WITH_ACTS(34,76,0,-3757,0,180,0,0x0, bhvDoor,31),
OBJECT_WITH_ACTS(34,-3236,2400,-7811,0,0,0,0x5f000000, bhvDoor,31),
OBJECT_WITH_ACTS(34,2548,900,-5630,0,0,0,0x3c000000, bhvDoor,31),
OBJECT_WITH_ACTS(34,2,1755,-5738,0,180,0,0x46000000, bhvDoor,31),
OBJECT_WITH_ACTS(201,-2974,520,-3722,0,0,0,0x0, bhvCannonClosed,31),
OBJECT_WITH_ACTS(0,-3233,2444,-8267,0,0,0,0x180000, bhvFadingWarp,31),
OBJECT_WITH_ACTS(0,2544,968,-6130,0,0,0,0x170000, bhvFadingWarp,31),
OBJECT_WITH_ACTS(0,1,1824,-5256,0,0,0,0x190000, bhvFadingWarp,31),
OBJECT_WITH_ACTS(38,-76,-1200,-5683,0,0,0,0x80000, bhvDoorWarp,31),
OBJECT_WITH_ACTS(38,76,-1200,-5683,0,180,0,0x90000, bhvDoorWarp,31),
OBJECT_WITH_ACTS(46,1702,1380,1833,0,0,0,0x10000, bhvCheckpoint_Flag_MOP,31),
OBJECT_WITH_ACTS(0,-6,0,-4311,0,0,0,0xb0000, bhvFadingWarp,31),
OBJECT_WITH_ACTS(0,-7,444,-3455,0,0,0,0xc0000, bhvSpinAirborneWarp,31),
OBJECT_WITH_ACTS(0,-10,444,-3453,0,180,0,0xd0000, bhvAirborneDeathWarp,31),
OBJECT_WITH_ACTS(195,-2849,3000,-1261,0,0,0,0x53000000, bhvToadMessage,31),
OBJECT_WITH_ACTS(215,5380,-714,-9686,0,0,0,0x0, bhvRedCoin,31),
OBJECT_WITH_ACTS(215,5204,-714,-5482,0,0,0,0x0, bhvRedCoin,31),
OBJECT_WITH_ACTS(215,4561,-714,-744,0,0,0,0x0, bhvRedCoin,31),
OBJECT_WITH_ACTS(215,-2150,-714,-792,0,0,0,0x0, bhvRedCoin,31),
OBJECT_WITH_ACTS(215,-4945,-714,-5471,0,0,0,0x0, bhvRedCoin,31),
OBJECT_WITH_ACTS(215,-4789,-714,-8669,0,0,0,0x0, bhvRedCoin,31),
OBJECT_WITH_ACTS(215,1197,-714,-979,0,0,0,0x0, bhvRedCoin,31),
OBJECT_WITH_ACTS(215,-4861,-714,-2290,0,0,0,0x0, bhvRedCoin,31),
OBJECT_WITH_ACTS(0,1731,1380,2120,0,0,0,0x1000000, bhvBowserCourseRedCoinStar,31),
OBJECT_WITH_ACTS(137,9493,540,-4156,0,0,0,0x10000, bhvExclamationBox,31),
OBJECT_WITH_ACTS(0,-2011,1021,8408,0,0,0,0xf010000, bhvWarp,31),
OBJECT_WITH_ACTS(0,-2311,1021,8411,0,0,0,0xf010000, bhvWarp,31),
OBJECT_WITH_ACTS(0,-2311,722,8411,0,0,0,0xf010000, bhvWarp,31),
OBJECT_WITH_ACTS(0,2550,1362,-5251,0,180,0,0xe0000, bhvAirborneStarCollectWarp,31),
OBJECT_WITH_ACTS(0,2550,1362,-5251,0,180,0,0xf0000, bhvAirborneDeathWarp,31),
OBJECT_WITH_ACTS(0,-3237,2712,-7514,0,180,0,0x100000, bhvAirborneStarCollectWarp,31),
OBJECT_WITH_ACTS(0,-3237,2712,-7514,0,180,0,0x110000, bhvAirborneDeathWarp,31),
OBJECT_WITH_ACTS(0,-1,2189,-6194,0,0,0,0x120000, bhvAirborneStarCollectWarp,31),
OBJECT_WITH_ACTS(0,-1,2189,-6194,0,0,0,0x130000, bhvAirborneDeathWarp,31),
OBJECT_WITH_ACTS(0,1702,1417,1833,0,0,0,0x150000, bhvAirborneDeathWarp,31),
OBJECT_WITH_ACTS(38,-76,1755,-8619,0,0,0,0x1b0000, bhvDoorWarp,31),
OBJECT_WITH_ACTS(38,76,1755,-8619,0,180,0,0x1b0000, bhvDoorWarp,31),
OBJECT_WITH_ACTS(38,76,0,-8619,0,180,0,0x1a0000, bhvDoorWarp,31),
OBJECT_WITH_ACTS(38,-76,0,-8619,0,0,0,0x1a0000, bhvDoorWarp,31),
OBJECT_WITH_ACTS(0,-2178,1230,7903,0,180,0,0x2f0000, bhvSpinAirborneWarp,31),
OBJECT_WITH_ACTS(46,-3233,2100,-6539,0,0,0,0x10000, bhvCheckpoint_Flag_MOP,31),
OBJECT_WITH_ACTS(46,-2970,525,-3719,0,0,0,0x10000, bhvCheckpoint_Flag_MOP,31),
OBJECT_WITH_ACTS(46,2533,1050,-4172,0,0,0,0x10000, bhvCheckpoint_Flag_MOP,31),
OBJECT_WITH_ACTS(46,-2,1845,-7595,0,0,0,0x10000, bhvCheckpoint_Flag_MOP,31),
OBJECT_WITH_ACTS(0,-8,4,70,0,0,20,0, RM_Scroll_Texture,31),
OBJECT_WITH_ACTS(0,-10,4,15,0,0,20,1, RM_Scroll_Texture,31),
OBJECT_WITH_ACTS(0,-8,4,18,0,0,20,2, RM_Scroll_Texture,31),
OBJECT_WITH_ACTS(0,-10,4,14,0,0,20,3, RM_Scroll_Texture,31),
OBJECT_WITH_ACTS(0,-10,4,14,0,0,20,4, RM_Scroll_Texture,31),
OBJECT_WITH_ACTS(0,-12,4,19,0,0,20,5, RM_Scroll_Texture,31),
OBJECT_WITH_ACTS(0,-8,4,80,0,0,20,6, RM_Scroll_Texture,31),
RETURN()
};
const LevelScript local_warps_castle_grounds_1_[] = {
WARP_NODE(10,9,1,0,0),
WARP_NODE(0,16,1,0,0),
WARP_NODE(1,9,1,10,0),
WARP_NODE(2,14,1,10,0),
WARP_NODE(3,15,1,10,0),
WARP_NODE(4,16,1,0,0),
WARP_NODE(5,16,1,0,0),
WARP_NODE(6,16,1,0,0),
WARP_NODE(7,6,1,2,0),
WARP_NODE(8,6,1,1,0),
WARP_NODE(9,6,1,2,0),
WARP_NODE(11,27,1,10,0),
WARP_NODE(12,16,1,0,0),
WARP_NODE(13,16,1,0,0),
WARP_NODE(14,16,1,0,0),
WARP_NODE(15,16,1,0,0),
WARP_NODE(16,16,1,0,0),
WARP_NODE(17,16,1,0,0),
WARP_NODE(18,16,1,0,0),
WARP_NODE(19,16,1,0,0),
WARP_NODE(20,16,1,0,0),
WARP_NODE(21,16,1,0,0),
WARP_NODE(22,16,1,0,0),
WARP_NODE(23,14,1,10,0),
WARP_NODE(24,15,1,10,0),
WARP_NODE(25,20,1,10,0),
WARP_NODE(26,16,1,27,0),
WARP_NODE(27,16,1,26,0),
WARP_NODE(47,16,1,0,0),
WARP_NODE(240,6,1,50,0),
WARP_NODE(241,16,1,21,0),
RETURN()
};
const LevelScript local_area_castle_grounds_2_[] = {
AREA(2,Geo_castle_grounds_2_0x261f160),
TERRAIN(col_castle_grounds_2_0xe06e3e0),
SET_BACKGROUND_MUSIC(0,0),
TERRAIN_TYPE(0),
JUMP_LINK(local_objects_castle_grounds_2_),
JUMP_LINK(local_warps_castle_grounds_2_),
END_AREA(),
RETURN()
};
const LevelScript local_objects_castle_grounds_2_[] = {
OBJECT_WITH_ACTS(0,-3,-692,-5196,0,0,0,0xa0000, bhvSpinAirborneWarp,31),
OBJECT_WITH_ACTS(31,5,0,1572,0,0,0,0x0, bhvDoor,31),
OBJECT_WITH_ACTS(31,-2,0,-1573,0,180,0,0x0, bhvDoor,31),
OBJECT_WITH_ACTS(31,1574,0,-1,0,90,0,0x50000000, bhvDoor,31),
OBJECT_WITH_ACTS(31,-1574,0,3,0,270,0,0x6e000000, bhvDoor,31),
OBJECT_WITH_ACTS(0,5400,1330,2,0,0,0,0x20000, bhvFadingWarp,31),
OBJECT_WITH_ACTS(0,-5393,1330,-7,0,0,0,0x30000, bhvFadingWarp,31),
OBJECT_WITH_ACTS(0,-6,1330,5394,0,0,0,0x10000, bhvFadingWarp,31),
OBJECT_WITH_ACTS(137,-1,-640,-6002,0,0,0,0x0, bhvExclamationBox,31),
OBJECT_WITH_ACTS(46,-1577,0,0,0,0,0,0x10000, bhvCheckpoint_Flag_MOP,31),
OBJECT_WITH_ACTS(46,2,0,1586,0,0,0,0x10000, bhvCheckpoint_Flag_MOP,31),
OBJECT_WITH_ACTS(46,1583,0,14,0,0,0,0x10000, bhvCheckpoint_Flag_MOP,31),
OBJECT_WITH_ACTS(0,7,-588,-4064,0,0,0,0x640000, bhvAirborneDeathWarp,31),
OBJECT_WITH_ACTS(0,-4050,1362,13,0,-90,0,0x160000, bhvAirborneStarCollectWarp,31),
OBJECT_WITH_ACTS(0,-4050,1362,13,0,-90,0,0x170000, bhvAirborneDeathWarp,31),
OBJECT_WITH_ACTS(0,-5,1362,4066,0,0,0,0x210000, bhvAirborneDeathWarp,31),
OBJECT_WITH_ACTS(0,-5,1362,4066,0,0,0,0x200000, bhvAirborneStarCollectWarp,31),
OBJECT_WITH_ACTS(0,4026,1362,0,0,90,0,0x2a0000, bhvAirborneStarCollectWarp,31),
OBJECT_WITH_ACTS(0,4026,1362,0,0,90,0,0x2b0000, bhvAirborneDeathWarp,31),
OBJECT_WITH_ACTS(195,226,-600,-2921,0,253,0,0x60000, bhvBobombBuddy,31),
OBJECT_WITH_ACTS(124,-375,0,1416,0,180,0,0x3a0000, bhvMessagePanel,31),
OBJECT_WITH_ACTS(0,-15,4,597,0,0,20,7, RM_Scroll_Texture,31),
OBJECT_WITH_ACTS(0,-25,4,68,0,0,20,8, RM_Scroll_Texture,31),
OBJECT_WITH_ACTS(0,-25,4,23,0,0,20,9, RM_Scroll_Texture,31),
OBJECT_WITH_ACTS(0,-25,4,36,0,0,20,10, RM_Scroll_Texture,31),
OBJECT_WITH_ACTS(0,-15,4,5,0,0,20,11, RM_Scroll_Texture,31),
OBJECT_WITH_ACTS(0,-25,4,5,0,0,20,12, RM_Scroll_Texture,31),
OBJECT_WITH_ACTS(0,-15,4,5,0,0,20,13, RM_Scroll_Texture,31),
RETURN()
};
const LevelScript local_warps_castle_grounds_2_[] = {
WARP_NODE(10,9,2,0,0),
WARP_NODE(0,10,1,12,0),
WARP_NODE(1,28,2,10,0),
WARP_NODE(2,31,2,10,0),
WARP_NODE(3,18,1,10,0),
WARP_NODE(100,16,2,0,0),
WARP_NODE(22,16,2,0,0),
WARP_NODE(23,16,2,0,0),
WARP_NODE(32,16,2,0,0),
WARP_NODE(33,16,2,0,0),
WARP_NODE(42,16,2,0,0),
WARP_NODE(43,16,2,0,0),
WARP_NODE(240,6,1,50,0),
WARP_NODE(241,16,2,100,0),
RETURN()
};
const LevelScript local_area_castle_grounds_3_[] = {
AREA(3,Geo_castle_grounds_3_0x261f040),
TERRAIN(col_castle_grounds_3_0xe01e8e0),
SET_BACKGROUND_MUSIC(0,2),
TERRAIN_TYPE(0),
JUMP_LINK(local_objects_castle_grounds_3_),
JUMP_LINK(local_warps_castle_grounds_3_),
END_AREA(),
RETURN()
};
const LevelScript local_objects_castle_grounds_3_[] = {
OBJECT_WITH_ACTS(0,-4015,-2015,21171,0,180,0,0xa0000, bhvSpinAirborneWarp,31),
OBJECT_WITH_ACTS(137,6707,3120,-15045,0,0,0,0x150000, bhvExclamationBox,31),
OBJECT_WITH_ACTS(123,4115,8330,-12647,0,0,0,0x0, bhvNoteblock_MOP,31),
OBJECT_WITH_ACTS(212,-4019,-2655,21167,0,0,0,0x9f0000, bhv1Up,31),
OBJECT_WITH_ACTS(0,1438,7588,1493,0,0,0,0x32700101, Bhv_Custom_0x13005770,31),
OBJECT_WITH_ACTS(124,-746,3239,-182,0,180,0,0x920000, bhvMessagePanel,31),
OBJECT_WITH_ACTS(46,10571,-734,-496,0,0,0,0x0, bhvCheckpoint_Flag_MOP,31),
OBJECT_WITH_ACTS(46,4692,8334,-6861,0,0,0,0x0, bhvCheckpoint_Flag_MOP,31),
OBJECT_WITH_ACTS(46,7656,2931,-15067,0,0,0,0x0, bhvCheckpoint_Flag_MOP,31),
OBJECT_WITH_ACTS(207,341,6477,-6045,0,0,0,0x0, bhvFloorSwitchHiddenObjects,31),
OBJECT_WITH_ACTS(129,418,6885,-5162,0,0,0,0x0, bhvHiddenObject,31),
OBJECT_WITH_ACTS(129,751,7245,-4626,0,0,0,0x0, bhvHiddenObject,31),
OBJECT_WITH_ACTS(129,761,7245,-3423,0,0,0,0x0, bhvHiddenObject,31),
OBJECT_WITH_ACTS(129,788,7245,-2099,0,0,0,0x0, bhvHiddenObject,31),
OBJECT_WITH_ACTS(129,927,7245,-656,0,0,0,0x0, bhvHiddenObject,31),
OBJECT_WITH_ACTS(0,-4049,-1680,21165,0,179,0,0x2c0000, bhvAirborneDeathWarp,31),
OBJECT_WITH_ACTS(122,1437,7992,1491,0,0,0,0x7000000, bhvStar,31),
OBJECT_WITH_ACTS(124,911,7498,1298,0,161,0,0x840000, bhvMessagePanel,31),
OBJECT_WITH_ACTS(195,-3509,-2705,20596,0,0,0,0x9f0000, bhvBobombBuddy,31),
OBJECT_WITH_ACTS(0,14,4,71,0,0,20,14, RM_Scroll_Texture,31),
OBJECT_WITH_ACTS(0,14,4,34,0,0,20,15, RM_Scroll_Texture,31),
OBJECT_WITH_ACTS(0,14,4,713,0,0,20,16, RM_Scroll_Texture,31),
OBJECT_WITH_ACTS(0,14,4,865,0,0,20,17, RM_Scroll_Texture,31),
OBJECT_WITH_ACTS(0,14,4,543,0,0,20,18, RM_Scroll_Texture,31),
OBJECT_WITH_ACTS(0,14,4,176,0,0,20,19, RM_Scroll_Texture,31),
OBJECT_WITH_ACTS(0,14,4,326,0,0,20,20, RM_Scroll_Texture,31),
OBJECT_WITH_ACTS(0,14,4,586,0,0,20,21, RM_Scroll_Texture,31),
RETURN()
};
const LevelScript local_warps_castle_grounds_3_[] = {
WARP_NODE(10,9,2,0,0),
WARP_NODE(0,16,3,0,0),
WARP_NODE(1,16,3,0,0),
WARP_NODE(44,16,3,0,0),
WARP_NODE(240,25,1,10,0),
WARP_NODE(241,6,4,19,0),
RETURN()
};
